define("widgets/scrollPanel",["jquery","widgets/baseWidget"],function(b,a){b.widget("OC.scrollPanel",a,{options:{className:"scroll-panel"},_create:function(){var c=this.options;this._super();this.element.addClass(c.scrollName);this.elements.$wrapper=b("> *",this.element).wrapAll("<div>").parent();this._addEvents()},_addEvents:function(){this._on(this.element,{scroll:this._onScroll})},_onScroll:function(){if(this.options.disabled){return}this.refresh()},refresh:function(){var d=this.options,e=this.isScrollable(),c=this.element,i=c.scrollTop(),f=(d.className+"--scrollable-up"),j=(d.className+"--scrollable-down"),h=(e&&i>0),g=(i+this.element.height()<this.elements.$wrapper.height()-1);c.toggleClass(f,g);c.toggleClass(j,h)},disable:function(){this._super();this.element.removeClass("ui-state-disabled");this.refresh()},enable:function(){this._super();this.refresh()},setHeight:function(c){if(c==="auto"){this.element.css("height","auto")}else{this.element.outerHeight(c)}this.refresh()},isScrollable:function(){return(this.elements.$wrapper.height()>this.element.height())}});return b.OC.scrollPanel});
define("widgets/linkedSelect",["jquery","_","widgets/baseWidget"],function(c,a,b){c.widget("OC.linkedSelect",b,{options:{rawdata:null,freeFieldTrigger:null,},_create:function(){this._super();this.value=null;this.elements.$mainSelelect=this._createSelect(this._getNodeChildren(0));this.elements.$freeField=c('<input type="text">').appendTo(this.element);this._on(this.elements.$freeField,{input:this._onChangeFreeField});this._toggleFreeField(false)},_getNodeChildren:function(f){var e=this.options.rawdata[f],d=e?e.children:null;return d?a.sortBy(d,"position"):[]},_createSelect:function(h,e){var g,d=c("select",this.element),i=this.options.freeFieldTrigger,f=false;if(!e){e=c("<select>");f=true}e.empty();h.unshift({id:"",title:""});h.forEach(function(j){g=c("<option>").attr("value",j.id).text(j.title).appendTo(e);if(i&&j[i.field]===i.value){g.data("needFreeField",true)}});this._on(e,{change:this._onSelectChange});if(f){if(d.length===0){e.appendTo(this.element)}else{e.insertAfter(d.last())}}return e},_onChangeFreeField:function(d){this._trigger("changeFreeField",d,{value:this.freeFieldVal()})},_onSelectChange:function(g){var e=c(g.currentTarget),h=e.val(),d=!!c(":selected",e).data("needFreeField"),f=this._getNodeChildren(h);e.nextAll("select").remove();if(f.length>0){this._createSelect(f,this._getNextSelect(e))}this._toggleFreeField(d);this.value=h;this._trigger("change",g,{value:this.val()})},_getNextSelect:function(e){var d=e.next("select");return !!d.length?d:null},_toggleFreeField:function(d){this.elements.$freeField.css("visibility",d?"visible":"hidden");if(!d){this.elements.$freeField.val("");this._onChangeFreeField()}},val:function(){return this.value},freeFieldVal:function(){return this.elements.$freeField.val()}});return c.OC.linkedSelect});
define("widgets/ebookConfirmDownload",["jquery","widgets/baseWidget","modules/confirm"],function(e,c,b){var d="ebookConfirmDownload",a="js-ebookConfirmDownload";e.widget("OC."+d,c,{options:{},_create:function(){this._super();this._on(this.element,{click:this._onClick})},_onClick:function(f){f.preventDefault();if(!e(f.target).is(".disabled")){b.show({message:this.options.message,textButton:this.options.button,confirmCallback:e.proxy(this._onConfirm,this)})}},_onConfirm:function(){window.open(this.element.attr("href"));window.setTimeout(function(){window.location.reload()},300)}});e("."+a)[d]();return e.OC[d]});
define("widgets/gallery",["jquery","widgets/baseWidget"],function(d,b){var c="gallery",a="js-gallery";d.widget("OC."+c,b,{options:{},_create:function(){var f,e=this;this._super();this.currentIndex=0;this.elements.mainImage=d(this.element).find(".js-main-image > img");f=d(this.element).find(".js-thumb-image img");f.each(function(h,g){d(g).data("index",h)});if(f.length===1){d(".js-thumbs",this.element).hide()}this._on(this.element,{"mouseenter .js-thumb-image":this.onMouseenterThumb,"click .js-thumb-image, .js-main-image":function(g){g.preventDefault();e.openGallery()}})},onMouseenterThumb:function(f){var g=d(f.currentTarget),e=g.find("img").first();this._inactiveAll();g.addClass("is-active");this.elements.mainImage.attr("src",e.attr("src"));this.currentIndex=e.data("index")},_getImageList:function(){var e=[];this.element.find(".js-thumb-image img").each(function(g,f){e.push({href:f.src})});return e},_inactiveAll:function(){this.element.find(".is-active").removeClass("is-active")},openGallery:function(){if(d.fancybox){d.fancybox.open(this._getImageList(),{index:this.currentIndex,padding:0,openEffect:"none",closeEffect:"none",nextEffect:"none",prevEffect:"none",loop:false,tpl:{next:'<a class="fancybox-nav fancybox-next" href="javascript:;"><i class="icon-next"></i></a>',prev:'<a class="fancybox-nav fancybox-prev" href="javascript:;"><i class="icon-previous"></i></a>'}})}}});d("."+a)[c]();return d.OC[c]});
define("widgets/courseFormatsBar",["jquery","widgets/baseWidget","Modernizr","popin"],function(e,c,f,b){var d="courseFormatsBar",a=f.touch;e.widget("OC."+d,c,{options:{},_create:function(){var g=this;this._super();this.element.on(a?"tap":"click",function(i){var j=e(i.target).parent(),h=function(k){i.preventDefault();b.open(k)};if(j.is(".js-popin-activator")&&!a){h(j.data("popin-selector"))}else{if(a){h(g.options.popinselector)}}})}});e(".js-course-formats-bar")[d]();return e.OC[d]});
define("course/view/internalFolding",["jQuery","widgets/foldable","common/commands","utils/responsive"],function(f,d,c,g){var m,n=[],a="foldable",p=f(".js-course-container"),l=f("> *",p),e;function i(r,q){var s=[],t=[];r.each(function(x,u){var v=f(u).is(q),w=t.length;if(v||w>=1){if(v&&w>=1){s.push(f.merge([],t));t=[]}t.push(u)}});s.push(f.merge([],t));return s}function k(){return g.getCurrentWidth()!=="large"}function h(q){q.forEach(function(t){var s,u,r=f(t);u=r.wrapAll("<div>").parent().addClass(a).uniqueId();if(k()){r.parent().addClass("is-closed")}s=t.shift();r=f(t);f(s).addClass(a+"__button secondTitle js-foldable-button").append('<i class="'+a+'__icon icon-next"></i>');r.wrapAll("<div>").parent().addClass(a+"__content");if(u.length>0){new d({},u)}})}function j(s){var q,r=f("#"+s);if(!!r.length){q=r.closest("[data-widget=foldable]");if(!!q.length){q.data("OCFoldable").open();f(window).scrollTop(r.offset().top)}}}function b(){if(k()){f(".js-course-part li").addClass("course-part-summary--closed")}}function o(q){return q?"h3[id*=r-]":"h2[id*=r-]"}c.add("course.view.foldedPartsOpen",function(){m.each(function(r,q){f(q).data("OCFoldable").open()})});c.add("course.view.foldedPartsClose",function(){m.each(function(r,q){f(q).data("OCFoldable").close()})});c.execute("registerAnchor",["r-(\\d+)",function(r,q){j(q[0])}]);return{init:function(){e=o(this.preferences.isBigCourse);n=i(l,e);h(n);m=f("."+a,p);b()}}});
define("course/view/viewMath",["jQuery","math"],function(b,a){return{init:function(){if(b("math").length>0){new a.Renderer()}}}});
define("course/view/shortcuts",["App","jwerty","common/commands"],function(b,c,a){c.key("shift+down",function(){a.execute("course.view.foldedPartsOpen")});c.key("shift+up",function(){a.execute("course.view.foldedPartsClose")})});
define("course/view/floatpanel",["jQuery","require","widgets/sticky","widgets/scrollPanel","widgets/classname-switcher"],function(c,j,i,x,o){var m,e,t,f,v,k,b,g,y,r="col-nav--closed",a=j("utils/responsive"),u=j("common/pubsub"),p=c(window);function w(){var z,A;if(k==="medium"){z=p.height();A=m.offset().top-p.scrollTop();g.setHeight(z-A)}else{if(e&&e.is(":visible")){n(false);v.close()}}}function d(z){switch(z){case"medium":f.removeClass("relative");t.addClass("relative");y.resetResizeContainer().option({margin:0,bottomCap:false,$container:t}).enable();break;case"large":f.addClass("relative");y.option({margin:30,bottomCap:true,$container:f}).enable().resizeContainer();break;case"small":y.resetResizeContainer().disable();m.hide();break}}function l(z){switch(z){case"large":case"small":d(z);g.disable();g.setHeight("auto");break;case"medium":d(z);g.enable();break}k=z}function s(B){var z=c(document),A="mousewheel touchmove touchend";if(B){z.on(A,h)}else{z.off(A,h)}}function q(){var z=!m.hasClass(r);if(k==="medium"){if(z){n(true);w()}else{n(false)}s(z)}}function h(C){var z=c(C.target),B=(z.closest(m).length>0),A=(C.type==="touchmove"||C.type==="mousewheel");if(!B||(B&&!g.isScrollable()&&A)){C.preventDefault()}if(!B){v.close()}}function n(z){e=c("#overlay");if(!e.length){e=c("<div>").attr("id","overlay").prependTo(c("body")).addClass("overlay")}e.toggle(z)}return{init:function(){m=c(".js-sidebar");t=c(".js-sidebar-container");f=c(".js-desktop-sticky-container");if(!!m.length){b=c(".js-sidebar-inner",m);y=new i({margin:0,disabled:true,bottomCap:false,resizeContainer:false,$container:t},m);g=new x(null,b);v=new o({onSwitch:q,target:m,classnameToToggle:r},c("#course-sidebar-switch"));l(a.getCurrentWidth());w();c(window).on("resize",c.throttle(100,w));v.close(true);u.subscribe(u.EVENT.RESPONSIVE_BREAKPOINT_CHANGE,function(z,A){l(A.width)})}}}});
define("course/view/pictureZoom",["jQuery"],function(d){var e=new Image();function b(g){return !!g.match(/\.(jpeg|jpg|gif|png)$/)}function a(g){e.src=g.src;return(e.width===g.width&&e.height===g.height)}function c(j){var h=d(j),i=h.children(),g=(i.length===1)&&i.get(0).tagName==="IMG"&&b(j.href);return g}function f(g){d(g).css("cursor","pointer").css("cursor","-webkit-zoom-in").css("cursor","-moz-zoom-in")}d(document).on("click",".js-course-container a",function(g){if(c(g.currentTarget)){g.preventDefault()}}).on("mouseenter",".js-course-container img:not(.video-thumb__image), .js-course-container a",function(g){if(c(g.currentTarget)||(g.currentTarget.src&&!a(g.currentTarget))){f(g.currentTarget)}}).on("click",".js-course-container img:not(.video-thumb__image)",function(j){var l=null,h=d(j.currentTarget),k=h.parent(),i=k.get(0).tagName==="A",g=i&&b(k.attr("href")),m=k.find("figcaption");if(i&&!g){return}if(!g&&j.target.src&&a(j.target)){return}if(m.length){l=m.html()}d.fancybox.open([{href:g?k.attr("href"):j.target.src,title:l}],{padding:0})})});
define("course/pdf/formPdfDownload",["jQuery","widgets/ajaxForm","widgets/calendarSelect","widgets/linkedSelect","common/commands","i18n","common/pubsub"],function(d,g,a,f,b,l,i){var m,e,k;function j(n){i.publish(i.EVENT.DOWNLOAD_PDF,{courseSlug:n})}function h(){var o=d("#pdf_download_useractivity_other_activity"),n=d("#pdf_download_useractivity_activity"),q=d(".js-user-activity"),p=d(".js-date-picker-pdf");m=m||q.data("option_rawdata");if(p.length!==0){new a(null,p)}if(q.length!==0){new f({rawdata:m,freeFieldTrigger:{field:"title",value:"Autre"},create:function(){o.attr("type","hidden")},change:function(r,s){n.val(s.value)},changeFreeField:function(r,s){o.val(s.value)}},q)}c();d("#js-pdf-link").on("click",function(){var r=d(this),s=r.data();if(r.attr("href")===""&&e){r.attr("href",e)}j(s.courseSlug||k)})}function c(){var o,q,p,n=d("#pdfFormDownload");if(n.length>0){p=n.data();k=p?p.courseSlug:k;q=n.parent();e=atob(n.data("pdf-check").split("").reverse().join(""));o=new g({submit:function(r,s){s.request.done(function(t){q.html(t);h()}).fail(function(){o.setLoadingState(false);b.execute("flashMessage.add",["error",l("An error has occured. Please try later.")])})}},n)}}d(document).ready(function(){h()})});
define("course/view/downloadVideo",["jQuery","popin"],function(c,a){function d(){a.open("#popin-download-video")}function b(){c("video").each(function(g,f){var e=c(".js-video-download-info").clone();e.removeClass("invisible").insertAfter(f)})}b();c(document).on("click",".js-download-video",function(e){e.preventDefault();d()})});
define("course/view/traces",["common/pubsub"],function(a){return{init:function(){var b=this.preferences;setTimeout(function(){a.publish((b.partId?a.EVENT.VIEW_PART:a.EVENT.VIEW_COURSE),b)},1000)}}});
define("view/intercom",["jquery","user"],function(b,a){b(document).on("click",".js-intercom",function(c){c.preventDefault();if(a.isPremium()&&window.Intercom){window.Intercom("show")}})});
define("view/courseViewRestriction",["jQuery","user","common/pubsub","common/errorFactory"],function(g,k,t,j){var h=10,d=(24*3600*1000),r=window.localStorage,n=g(".js-isRestrictablePage").first(),q=(n.length>0),l=j("UserCantViewPartException");function p(){try{f()}catch(u){if(u instanceof l){t.publish(t.EVENT.RESTRICTED_PAGE_VIEW)}else{throw u}}}function f(){var u=n.data("pageIndentifier");if(s()){b(u);m(u)}}function s(){return !k.isConnected()&&q&&!document.hidden}function m(v){var u=o();if(!u){a();u=o()}if(!e(v)){u.list.push(v)}i(u)}function e(w){var v=o(),u=false;if(v&&v.list.indexOf(w)>-1){u=true}return u}function b(v){var u=o();if(u&&(u.list.length>=h)){if(c()){a()}else{if(!e(v)){throw new l()}}}}function a(){var u={list:[],TTL:Date.now()+d};i(u)}function o(){var u=r.getItem("history");if(u){u=JSON.parse(u)}return u}function i(u){r.setItem("history",JSON.stringify(u))}function c(){var u=o(),v=u?(Date.now()>u.TTL):false;return v}return{init:p}});
define("math",["jQuery","App"],function(a){var d,b;function c(g,h){var f=(g.self!==g.top),e=f?d:b;return new e(g,h)}b=function(e,f){this.loaded=false;if(e!==false){this.readyCallback=f||a.noop;this.win=e||window;this._init()}};b.SCRIPT_URL="http://cdn.mathjax.org/mathjax/2.3-latest/MathJax.js?config=TeX-AMS_HTML";b.CONFIG={TeX:{extensions:["color.js"]},tex2jax:{inlineMath:[["\\(","\\)"]],displayMath:[["\\[","\\]"],["$$","$$"]],skipTags:["script","noscript","style","textarea","code"]}};b.prototype._init=function(){this.sanitizeMathElements(a("math",this.win.document));this._loadMathjax()};b.prototype._escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};b.prototype._loadMathjax=function(){var f,e=this,g=function(h,j){var i=e.win.document.createElement("script");i=a.extend(i,h);if(j){i.innerHTML=j}e.win.document.getElementsByTagName("head")[0].appendChild(i)};if(!this.win.MathJax||!this.win.MathJax.Hub){g({type:"text/x-mathjax-config"},"MathJax.Hub.Config("+JSON.stringify(b.CONFIG)+");");g({type:"text/javascript",src:b.SCRIPT_URL});f=this.win.setInterval(function(){if(this.MathJax){this.MathJax.Hub.Register.MessageHook("End Process",function(h){a(".js-math",h).addClass("math-formula--ready")});e.loaded=true;e.readyCallback();e.win.clearInterval(f)}},50)}else{this.readyCallback()}};b.prototype.mathjaxToHtml=function(f){var e=this;a("div[style]",f).remove();a("#MathJax_MSIE_Frame, #MathJax_Font_Test, #MathJax_Message",f).remove();a(".js-math",f).each(function(l,h){var j=(h.getAttribute("data-inline")==="true"),g=h.parentNode,i=h.getAttribute("data-latex"),k=a("<math></math>").text(e.getDelimitedLatex(i,j).trim());k.insertAfter(h);if(g.getAttribute("data-wasAp")==="1"){g=e.switchTagName(g,"p");g.removeAttribute("data-wasAp");h=g.firstChild}a(h).remove()});return f};b.prototype.updateElement=function(g,h,i,f){var e=a(g);if(typeof f==="undefined"){f=true}h=this.getDelimitedLatex(h,i);e.text(h).attr("data-inline",i).attr("data-latex",h);if(f){this.updateElementRendering(g)}};b.prototype.getLatexFromDelimited=function(j){var i,k,e=this,h,g,f=null;if(this.isDelimitedLatexString(j)){i=this.isDelimitedLatexInline(j);k=b.CONFIG.tex2jax[i?"inlineMath":"displayMath"];k.forEach(function(l){h=new RegExp(e._escapeRegExp(l[0])+"(.*)"+e._escapeRegExp(l[1]));g=j.match(h);if(g&&!f){f=g[1].trim()}})}else{f=j}return f};b.prototype.getFormulaFromElement=function(e){return{latex:this.getLatexFromDelimited(e.getAttribute("data-latex")),inline:(e.getAttribute("data-inline")==="true")}};b.prototype.isDelimitedLatexInline=function(f){var g=b.CONFIG.tex2jax.inlineMath[0],e=new RegExp(this._escapeRegExp(g[0])+"(.*)"+this._escapeRegExp(g[1]));return !!(f||"").match(e)};b.prototype.isDelimitedLatexString=function(i){var h,g,e=this,f=false,j=b.CONFIG.tex2jax.inlineMath.concat(b.CONFIG.tex2jax.displayMath);j.forEach(function(k){h=new RegExp(e._escapeRegExp(k[0])+"(.*)"+e._escapeRegExp(k[1]));g=i.match(h);if(g&&!f){f=true}});return f};b.prototype.updateElementRendering=function(e,h){var g=e?e.getAttribute("data-latex"):null,f=this.win.MathJax.Hub;if(!h){h=a.noop}if(g){a(e).text(g)}f.Queue(new this.win.Array("Typeset",f,e),h)};b.prototype.getDelimitedLatex=function(g,h){var e,f=g;if(!this.isDelimitedLatexString(g)){if(g.match(/\\$/)){g=g.replace(/\\+$/,"")}e=b.CONFIG.tex2jax[h?"inlineMath":"displayMath"][0];f=e[0]+g+e[1]}return f};b.prototype.isMathInlineElement=function(f){var e=f.getAttribute("data-inline"),g=e?(e==="true"):null;if(typeof g!=="boolean"){g=this.isDelimitedLatexInline(a.text(f))}return g};b.prototype.switchTagName=function(g,j){var h,e=a(g),f=Array.prototype.slice.call(g.attributes),i=a("<"+j+">");f.forEach(function(k){i.attr(k.name,k.value)});h=(e.children().length===0)?e.text():e.html();i.html(h).insertAfter(g);a(g).remove();return i.get(0)};b.prototype.addDelimitersToElements=function(g,f){var e=this;a(g).each(function(j,h){var i=a.text(h);f=typeof(f!=="boolean")?e.isMathInlineElement(h):f;a(h).attr("data-inline",f).text(e.getDelimitedLatex(i,f))})};b.prototype.addElement=function(f,g,e){if(typeof e==="undefined"){e=true}f.setAttribute("data-inline",g);f=this.sanitizeMathElements(f);if(e){this.updateElementRendering(f)}return f};b.prototype.sanitizeMathElements=function(i){var e,h,f=this,g=null;e=function(j){a(j).each(function(p,l){var m=a.text(l),o=m.match(/\$\$(.*)\$\$/),k=o?o[1]:null;if(k){if(f.isDelimitedLatexString(k)){l.setAttribute("data-inline",f.isDelimitedLatexInline(k));k=f.getLatexFromDelimited(k);a(l).text(k)}else{a(l).text(k);l.setAttribute("data-inline",true)}}})};h=a(i);e(h);this.addDelimitersToElements(h);a(i).each(function(o,j){var m,l=f.isMathInlineElement(j),k=j.parentNode;j=f.switchTagName(j,l?"span":"div");if(!l&&k.tagName==="P"){m=f.switchTagName(k,"div");m.setAttribute("data-wasAp",1);j=m.firstChild}a(j).addClass("math-formula js-math").attr("data-latex",a.text(j));g=j});return g};d=function(){b.apply(this,arguments)};d.prototype=new b(false);d.prototype.constructor=b;d.prototype._init=function(){var e=this;this.sanitizeMathElements(a("math",this.win.document));this.loaded=true;a(".js-math",this.win.document).each(function(g,f){e._mathDecorate(f)});this.readyCallback()};d.prototype._mathDecorate=function(f){var e=a(f),g=this.getLatexFromDelimited(e.attr("data-latex")||e.text()),h=(this.stringLimit&&g.length>this.stringLimit)?(g.substring(0,this.stringLimit)+"..."):g;e.addClass("math-formula-basic").text(h)};d.prototype.updateElementRendering=function(e,f){this._mathDecorate(e);(f||a.noop)()};return{getRendererFactory:c,Renderer:b,BasicRenderer:d}});
define("needSubscription",["jQuery","i18n","common/commands","modules/confirm","user"],function(g,f,b,c,a){var e={mustLogIn:{message:f("You must connect to see this video."),button:f("Connect")},mustSubscribeToCourse:{message:f("To see this video you must to subscribe at this course. Do you want do now ? it s free !"),button:f("Yes")}};function h(){var i=g(".js-course-container").data("subscriptionUrl");if(i){g("<form>").attr({action:i,method:"POST"}).submit()}}function d(j,i){g(j).addClass("need-subscription js-need-subscription").append('<div class="need-subscription__message">'+(i||"")+"</div>")}b.add("setNeedSubscriptionElement",d);g(document).on("click",".js-need-subscription",function(){var i=a.isConnected()?e.mustSubscribeToCourse:e.mustLogIn;c.show({icon:a.isConnected()?"icon-student":"icon-profil",message:i.message,textButton:i.button,cancelButton:a.isConnected(),confirmCallback:!a.isConnected()?"/login":h})})});
define("courseView/media",["jQuery","i18n","_","common/commands","utils/debounce"],function(g,j,l,c,m){var e,n,h=[],b={},o=l.template('             <div class="video-thumb">                 <i class="video-thumb__default-icon icon-video"></i>                <img class="video-thumb__image" src="<% if (typeof thumbnailUrl === "string") { %><%= thumbnailUrl %><% } %>">            </div>'),a={youtube:{matcher:/(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(watch\?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*)).*/i,url:"//www.youtube.com/embed/$3"},vimeo:{matcher:/(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/,url:"//player.vimeo.com/video/$1"},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,url:"//www.dailymotion.com/embed/video/$1"}};b.ratio={base:1.77};function p(){if(typeof n==="undefined"){n=g(".js-course-container").is(".js-course-content")}return n}function f(){if(typeof e==="undefined"){e=g(".js-course-container").is(".js-isSubscribed")}return e}function k(r,t){var s,q=r.match(a.dailymotion.matcher);if(q){s=q[1];g.getJSON("https://api.dailymotion.com/video/"+s+"?callback=?",{fields:"thumbnail_720_url"}).fail(function(){t("http://www.dailymotion.com/thumbnail/video/"+s)}).done(function(u){t(u.thumbnail_720_url)})}else{t(null)}}function d(r,t){var s,q=r.match(a.vimeo.matcher);if(q){s=q[1];g.getJSON("http://www.vimeo.com/api/v2/video/"+s+".json?callback=?",{format:"json"},function(u){t(u[0].thumbnail_large)})}else{t(null)}}function i(r,t){var s,q=r.match(a.youtube.matcher);if(q){s=q[3];t("http://img.youtube.com/vi/"+s+"/0.jpg")}else{t(null)}}b.getThumbnailUrl=function(r){var t,q=g.Deferred(),s=b.getTypeFromUrl(r),u=function(v){q.resolve(v)};switch(s){case"youtube":t=i(r,u);break;case"vimeo":t=d(r,u);break;case"dailymotion":t=k(r,u);break;default:u(null)}return q};b.getIframeElement=function(){var q=g("<iframe></iframe>");q.attr({src:"about:blank",frameborder:0});return q.get(0)};b.getIframeUrl=function(s){var u=this.getTypeFromUrl(s),q=a[u],r=s.match(q.matcher),t=q.url;r.forEach(function(v,w){t=t.replace("$"+w,v||"")});return t};b.getTypeFromUrl=function(q){var r;for(r in a){if(a.hasOwnProperty(r)&&q.match(a[r].matcher)){return r}}};b.isValidUrl=function(q){return !!this.getTypeFromUrl(q)};b.iframeToVideo=function(q){g(q).each(function(v,s){var r,t=g(s),u=t.attr("data-src-origine");if(u){r=g("<video>").attr("src",u);t.replaceWith(r)}})};b.resize=function(q){g(q).each(function(v,u){var s=g(u),t=s.width(),r=t/b.ratio.base;s.height(r)})};b.videoToThumbnail=function(r,q){g(r).each(function(x,u){var t,s=g(u),v=b.getThumbnailUrl(s.attr("src")),w=g(o());w.addClass("video-thumb--loading").insertAfter(s);t=g("img",w).on("load",function(){w.removeClass("video-thumb--loading")});v.done(function(y){t.attr("src",y)});if(q){c.execute("setNeedSubscriptionElement",[w,'<i class="icon-large icon-video"></i> '+j("Subscribe for free to this course to see those videos.")])}s.remove()})};b.videoToIframe=function(r){var q=this;g(r).each(function(w,t){var s=g(t),v=s.attr("src"),u=g(q.getIframeElement());u.insertAfter(s).addClass("video js-claire-video").attr("data-src-origine",v);s.remove();u.attr("src",q.getIframeUrl(v));b.resize(u);h.push(u)})};g(".js-claire-video, video[data-claire-element-id]").each(function(r,q){if(f()||p()){b.videoToIframe(q)}else{b.videoToThumbnail(q,true)}});g(window).resize(m(200,function(){if(h.length){b.resize(h)}}));return b});
define("widgets/codeBlock",["jquery","widgets/baseWidget"],function(b,a){b.widget("OC.codeBlock",a,{options:{className:"code-block",preProcessCallback:b.noop},_create:function(){this._super();this.rawCode=this.element.text().trim();this.options.preProcessCallback(this.element);this._initCodeCopyFeature();this._attachEvents()},_attachEvents:function(){var d=this,e=this.options,c=e.className+"--show-raw-code";this.elements.$container.on("click","code",function(){d.elements.$container.toggleClass(c).find("textarea").val(d.getCode()).focus().select()}).on("blur","textarea",function(){d.elements.$container.toggleClass(c)})},_initCodeCopyFeature:function(){var c=b('<textarea wrap="off"></textarea>');this.elements.$container=this.element.parent();if(!this.elements.$container.is("pre")){this.elements.$container=this.element.wrap("<pre></pre>").parent()}c.addClass(this.options.className+"--raw-code").insertAfter(this.element);this.elements.$container.addClass(this.options.className)},getCode:function(){return this.rawCode},getLanguage:function(){return this.element.data("claireSemantic")||"text"}});return b.OC.codeBlock});
define("codeHighlite",["jQuery","App","yepnope","widgets/codeBlock"],function(d,b,f,a){var e,c=b.getPreferences().paths.lib;return{availablelanguages:["abap","actionscript","ada","asciidoc","assembly_x86","autohotkey","batchfile","c9search","c_cpp","clojure","cobol","coffee","coldfusion","csharp","css","curly","d","dart","diff","django","dot","ejs","erlang","forth","ftl","glsl","golang","groovy","haml","haskell","haxe","html","html_ruby","ini","jade","java","javascript","json","jsoniq","jsp","jsx","julia","latex","less","liquid","lisp","livescript","logiql","lsl","lua","luapage","lucene","makefile","markdown","matlab","mushcode","mushcode_high_rules","mysql","objectivec","ocaml","pascal","perl","pgsql","php","plain_text","powershell","prolog","properties","python","r","rdoc","rhtml","ruby","rust","sass","scad","scala","scheme","scss","sh","snippets","sql","stylus","svg","tcl","tex","text","textile","toml","twig","typescript","vbscript","velocity","verilog","xml","xquery","yaml"],conversionLanguage:{c:"c_cpp","html+php":"php",cpp:"c_cpp",nasm:"assembly_x86","objective-c":"objectivec"},init:function(){var g=this;e=this.getElements();if(this.shouldUseAce(e)){this.loadAce(function(){e.each(function(i,h){new a({preProcessCallback:function(j){g.colorize(j.get(0))}},h)})})}},getElements:function(g){return d("pre code[data-claire-semantic]:not([data-claire-semantic=console])",g)},getCodeElementLanguage:function(g,h){var i=g.getAttribute("data-claire-semantic")||"";return h?this.getValideLanguage(i):i},getValideLanguage:function(g){g=this.conversionLanguage[g]||g;return(this.availablelanguages.indexOf(g)>=0)?g:"text"},shouldUseAce:function(g){if(!g){g=this.getElements()}return(g.length>0)},getLibPath:function(){return c+"/ace"},loadAce:function(g){if(typeof ace==="undefined"){f({load:[this.getLibPath()+"/ace.js",this.getLibPath()+"/ext-static_highlight.js"],complete:function(){if(typeof g==="function"){g(ace)}}})}else{if(typeof g==="function"){g(ace)}}},colorize:function(j,n,g){if(typeof ace==="undefined"){return false}var i=ace.require("ace/ext/static_highlight"),h=d(j),k=h.html().trim(),m=this.getCodeElementLanguage(j,true),l=ace.require("ace/lib/dom");k=k.replace(/\xA0/g," ");k=k.replace(/&nbsp;/g," ");if(k.match(/(&lt;|&amp;|&gt;)/)){k=d("<div>").html(k).text()}h.data("rawCode",k);i.render(k,"ace/mode/"+this.getValideLanguage(m),"ace/theme/monokai",1,false,function(o){l.importCssString(o.css,"ace_highlight",g);h.html(o.html);if(n){n(j,k)}})},colorizeAll:function(h){var g=this;if(!h){h=this.getElements()}h.each(function(j,i){g.colorize(i)})}}});